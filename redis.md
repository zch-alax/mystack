# Redis知识点
## 对于Redis的理解
+ 高性能的基于key-value结构存储的NoSQL开源数据库。
+ 目前市面上绝大多数的公司都采用redis来实现分布式缓存，从而去提高数据的一个检索效率。
+ redis的特点：
   + 基于内存存储，在进行数据IO操作时能够达到非常的QPS，官方提供的指标是10W。
   + 内置了多种优化过后的数据结构实现，性能非常高，比如string、list、hash、set、zset等基本数据结构以及3种特殊的数据结构。
   + Redis底层采用单线程实现数据的IO(redis6.0引入了多线程IO)，在数据算法层面上不需要考虑并发安全性，从而导致它的底层算法时间复杂度基本上是常量复杂度。
   + redis支持持久化，避免因为服务器故障而导致数据丢失的问题。
+ 基于这些特点，redis一般用来实现分布式缓存，从而降低应用程序对关系型数据库检索带来的性能影响。
+ redis可以实现分布式锁、分布式队列、排行榜、查找附近的人等功能，为复杂应用提供非常方便和成熟的解决方案。
+ redis支持发布订阅模型、Lua脚本、事务等功能，且支持很多编程语言。
## Redis为什么快？
+ redis基于内存。
+ Redis 基于 Reactor 模式设计开发了一套高效的事件处理模型，主要是单线程事件循环和 IO 多路复用(redis6.0引入了多线程IO)。
+ Redis 内置了多种优化过后的数据结构实现，性能非常高。
## Redis使用场景
redis有什么使用场景估计还要看下它的特性：
### 高性能
redis数据存放到缓存中，非常适合存放那些高频读取但不经常写入的场景。
### 高并发
直接操作缓存能够承受的数据库请求数量是远远大于直接访问数据库。
## 分布式
分布式（distributed）是指在多台不同的服务器中部署不同的服务模块，通过远程调用协同工作，对外提供服务。
不同服务器中部署不同的功能，通过网络连接起来，组成一个完整的系统。
## Redis分布式锁
分布式锁是针对分布式系统下，不同的服务/客户端共享同一资源而产生的。即使多个线程不在同一个 JVM 进程中也能获取到同一把锁，进而实现共享资源的互斥访问。
一般会使用zookeeper和redis来实现分布式锁，而一般来说更多是使用redis来实现分布式锁。
### 特性
+ 互斥：任意一个时刻，锁只能被一个线程持有；
+ 高可用 ：锁服务是高可用的。并且，即使客户端的释放锁的代码逻辑出现问题，锁最终一定还是会被释放，不会影响其他线程对共享资源的访问。
+ 可重入：一个节点获取了锁之后，还可以再次获取锁。
### Redis分布式锁的实现方式
+ 使用redis```SETNX```实现分布式锁。SETNX即SET if Not eXists。如果key不存在的话，才会设置key的值。如果key已经存在，SETNX啥也不做。
   + 优点：实现方式简单、性能高效。
   + 缺点：释放锁的逻辑挂掉的话会导致无法释放锁，进而造成共享资源无法再被其他线程/进程访问。因此一般需要加上过期时间。 -->假如业务时间超过锁的过期时间，导致业务还未完成而锁就已经释放了呢？ ---> 延迟锁时间呢？ ---> 适当延长可以，但是如果延长的锁时间过长会影响到业务性能。还有没有其他办法？ --->  如果操作共享资源的操作还未完成，锁过期时间能够自己续期。


## Redis数据结构


## 项目中Redis分布式锁
### redis分布式锁在项目中是怎么实现的？
+ 自定义注解
+ 代理模式
### redis分布式锁用在项目的哪些场景？
### 使用redis分布式锁遇到的问题？
+ 锁未释放
+ 不是分布式锁的问题，redis连接数过高
